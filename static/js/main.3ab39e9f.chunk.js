(this.webpackJsonpcollab3d=this.webpackJsonpcollab3d||[]).push([[0],{30:function(e,t,n){e.exports=n(52)},38:function(e,t,n){},39:function(e,t,n){},47:function(e,t,n){},48:function(e,t,n){},49:function(e,t,n){},50:function(e,t,n){},51:function(e,t,n){},52:function(e,t,n){"use strict";n.r(t);var a=n(2),o=n(20),c=n(5),r=n(4),i=n(0),l=n.n(i),s=n(8),m=n.n(s),u=n(9),d=n(23),b=n(13),f=n(24),p=n(1);function v(e){var t=e.setModelSize,n=Object(c.a)(e,["setModelSize"]),a=Object(b.c)(f.a,"models/gltf/nike_shoe/scene.gltf");return Object(i.useEffect)((function(){var e=a.scene,t=(new p.Box3).setFromObject(e),n=t.getCenter(new p.Vector3),o=t.getSize(new p.Vector3),c=Math.max(o.x,o.y,o.z);e.scale.multiplyScalar(5/c),t.setFromObject(e),t.getCenter(n),t.getSize(o),e.position.copy(n).multiplyScalar(-1)}),[a,t]),l.a.createElement("primitive",Object.assign({object:a.scene},n))}function h(e){var t=e.position,n=void 0===t?[0,0,0]:t,a=e.rotation,o=void 0===a?[0,0,0]:a,c=Object(i.useRef)();n=Object(u.a)(p.Vector3,Object(r.a)(n)),o=Object(u.a)(p.Vector3,Object(r.a)(o));var s=n.clone();s.addScaledVector(o,.15);var m=[];m.push(n),m.push(s);var d=l.a.createElement("group",null,l.a.createElement("line",{ref:c},l.a.createElement("geometry",{attach:"geometry",vertices:m,verticesNeedUpdate:!0}),l.a.createElement("lineBasicMaterial",{attach:"material",color:"#7B7B7B"})),l.a.createElement("mesh",{visible:!0,position:m[1]},l.a.createElement("sphereGeometry",{attach:"geometry",args:[.02,16,16]}),l.a.createElement("meshStandardMaterial",{attach:"material",color:"red",transparent:!0})));return Object(i.useEffect)((function(){c.current.geometry.verticesNeedUpdate=!0})),d}function O(e){var t=e.cameraPosition,n=e.modelSize,a=e.controls,o=Object(c.a)(e,["cameraPosition","modelSize","controls"]);function s(e,t,n,a){var o,c;(o=n.position).set.apply(o,Object(r.a)(e)),(c=a.current.target).set.apply(c,Object(r.a)(t)),a.current.update()}var m=Object(b.d)(),u=m.camera,d=m.gl.domElement;return Object(i.useEffect)((function(){n&&s(new p.Vector3(1,.5,1).setLength(2*n).toArray(),[0,0,0],u,a)}),[u,n,a]),Object(i.useEffect)((function(){t&&s(t.position,t.focus,u,a)}),[u,t,a]),l.a.createElement("orbitControls",Object.assign({ref:a,args:[u,d]},o))}function g(e){var t=e.cameraPosition,n=e.setCamera,o=e.setOrbitControls,r=Object(c.a)(e,["cameraPosition","setCamera","setOrbitControls"]),s=Object(i.useState)(),m=Object(a.a)(s,2),u=m[0],d=m[1],f=Object(i.useState)(),g=Object(a.a)(f,2),E=g[0],j=g[1],S=Object(i.useState)(),y=Object(a.a)(S,2),R=y[0],N=y[1],C=Object(i.useRef)();return Object(i.useEffect)((function(){o(C.current)}),[C,o]),l.a.createElement(b.a,Object.assign({camera:{fov:60,near:.1},onCreated:function(e){var t=e.gl,a=e.scene,o=e.camera;t.outputEncoding=p.sRGBEncoding,a.background=new p.Color(5921370),n(o)}},r),l.a.createElement(O,{cameraPosition:t,modelSize:u,controls:C,minDistance:1,maxDistance:u?5*u:50}),l.a.createElement("ambientLight",null),l.a.createElement(i.Suspense,{fallback:null},l.a.createElement(v,{setModelSize:d,onPointerMove:function(e){return j(e.point.toArray())||N(e.face.normal.toArray())}}),l.a.createElement(h,{position:E,rotation:R})))}Object(b.b)({OrbitControls:d.a});n(37),n(38);var E=n(6),j=n(29),S=n(12),y=n(10),R=n(11),N=(n(39),function(e){function t(){return Object(E.a)(this,t),Object(S.a)(this,Object(y.a)(t).apply(this,arguments))}return Object(R.a)(t,e),Object(j.a)(t,[{key:"render",value:function(){return l.a.createElement("div",{className:"head"},l.a.createElement("div",{className:"greeting-row"},l.a.createElement("span",{className:"greeting"},"Welcome Greg!")),l.a.createElement("div",{className:"button-row"},l.a.createElement("div",{className:"buttons"},l.a.createElement("button",{className:"share",onClick:function(){return alert("share link copied")}},l.a.createElement("span",{className:"textShare"},"Share")),l.a.createElement("button",{className:"AR",onClick:function(){return alert("more features to come")}},l.a.createElement("span",{className:"textAR"},"AR"))),l.a.createElement("img",{className:"profile",alt:"Greg",src:"https://assets.website-files.com/5d3152346d95065922960b3a/5db769036b1dff3418bffd20_Greg.jpg"})))}}]),t}(l.a.Component)),C=n(19),w=n.n(C);n(47);function k(e,t){var n=new Date(e.valueOf());return n.setDate(e.getDate()+t),n}function D(e){var t=e.selected,n=(e.white,e.pin),a=e.author,o=e.date,r=e.comment,i=e.thread,s=e.onResolve,m=e.onReply,u=e.showReply,d=void 0===u||u,b=Object(c.a)(e,["selected","white","pin","author","date","comment","thread","onResolve","onReply","showReply"]);return l.a.createElement("div",{className:"wrapper"},l.a.createElement("div",{className:t?"selected-bar":""}),l.a.createElement("div",Object.assign({className:"note"+(t?" selected":"")},b),l.a.createElement("div",{className:"note-content"+(t?" selected":"")},l.a.createElement("div",{className:"note-top-row"},l.a.createElement("img",{className:"pin-color",alt:"",style:{backgroundColor:n.color}}),l.a.createElement("div",{className:"note-top-column"},l.a.createElement("div",{className:"author-row"},l.a.createElement("div",{className:"author-name"},a),l.a.createElement("button",{className:"resolve"+(i?" main-comment":""),onClick:function(e){e.stopPropagation(),s()}},"Resolve")),l.a.createElement("div",{className:"note-date"},function(e){var t=new Date,n=new Date(e);return t.toDateString()===n.toDateString()?"".concat(n.toLocaleTimeString(navigator.language,{timeStyle:"short"})," Today"):t.toDateString()===k(n,1).toDateString()?"Yesterday":n.toLocaleDateString(navigator.language,{dateStyle:"medium"})}(o)))),l.a.createElement("p",{className:"comment"},r),d?l.a.createElement("div",{className:"reply-row"},l.a.createElement("button",{className:"reply-button",onClick:function(e){e.stopPropagation(),m()}},function(e){return e&&e.length>0?e.length>1?"".concat(e.length," Replies"):"1 Reply":"Reply"}(i))):null),b.children))}n(48);function M(e){var t=e.isModalOpen,n=e.onCancel,a=e.onResolve,o=Object(c.a)(e,["isModalOpen","onCancel","onResolve"]);return l.a.createElement("div",{id:"modal",className:t?"":"hide",onClick:n},l.a.createElement("div",Object.assign({id:"modal-dialog",onClick:function(e){return e.stopPropagation()}},o),l.a.createElement("span",{id:"modal-warning"},"Are you sure you want to resolve?"),l.a.createElement("div",{id:"modal-actions"},l.a.createElement("span",{id:"modal-cancel",onClick:function(e){e.stopPropagation(),n()}},"Cancel"),l.a.createElement("span",{id:"modal-submit",onClick:function(e){e.stopPropagation(),a()}},"Submit"))))}n(49);function P(e){var t=e.notes,n=e.onSubmitComment,o=e.onSelect,r=e.onDeselect,s=e.onResolveNote,m=e.onReplyNote,u=Object(c.a)(e,["notes","onSubmitComment","onSelect","onDeselect","onResolveNote","onReplyNote"]),d=Object(i.useState)(null),b=Object(a.a)(d,2),f=b[0],p=b[1],v=Object(i.useState)(null),h=Object(a.a)(v,2),O=h[0],g=h[1],E=Object(i.useState)(void 0),j=Object(a.a)(E,2),S=j[0],y=j[1];return l.a.createElement("div",Object.assign({id:"notes-column"},u),l.a.createElement("div",{id:"input-column"},l.a.createElement("span",{id:"input-label"},"Comments"),l.a.createElement(w.a,{id:"input-comment",placeholder:"Add a comment",value:S,onChange:function(e){return y(e.target.value)}}),l.a.createElement("div",{id:"input-actions"},l.a.createElement("button",{id:"input-cancel",className:S?"enabled":"",onClick:function(){return S&&y("")}},"Cancel"),l.a.createElement("button",{id:"input-submit",className:S?"enabled":"",onClick:function(){S&&(n(S),y(""))}},"Submit"))),l.a.createElement("div",{className:"scroll-column"},t.map((function(e,t){var n=e.id,a=e.camera,i=Object(c.a)(e,["id","camera"]);return l.a.createElement(D,Object.assign({key:n,selected:n===f,white:t%2===1,onClick:function(){f===n?(r(),p(null)):(o(a),p(n))},onResolve:function(){return g(n)},onReply:function(e){p(n),m(n,e)}},i))}))),l.a.createElement(M,{isModalOpen:O,onCancel:function(){return g(null)},onResolve:function(){s(O),g(null)}}))}n(50),n(51);function z(e){var t=e.note,n=e.onReturn,o=e.onSubmitReply,r=e.onResolveNote,s=Object(c.a)(e,["note","onReturn","onSubmitReply","onResolveNote"]),m=Object(i.useState)(void 0),u=Object(a.a)(m,2),d=u[0],b=u[1],f=Object(i.useState)(null),p=Object(a.a)(f,2),v=p[0],h=p[1];return t?l.a.createElement("div",Object.assign({id:"thread-column"},s),l.a.createElement("div",{id:"back-to-comments-row",onClick:function(){n(),b("")}},l.a.createElement("i",{id:"back-to-comments-icon",className:"material-icons"},"chevron_left"),"Back to all comments"),l.a.createElement(D,Object.assign({selected:!0,onResolve:function(){return h(t.id)},showReply:!1},t),l.a.createElement(w.a,{id:"reply-comment",placeholder:"Add a reply",autoFocus:!0,value:d,onChange:function(e){return b(e.target.value)},onKeyPress:function(e){"Enter"===e.key&&(e.preventDefault(),o(t.id,d),b(""))}})),l.a.createElement("div",{className:"scroll-column"},t&&t.thread.map((function(e){return l.a.createElement(D,Object.assign({key:e.id,white:!0,onResolve:function(){return h(e.id)},showReply:!1},e))}))),l.a.createElement(M,{isModalOpen:v,onCancel:function(){return h(null)},onResolve:function(){r(v),h(null)}})):null}function A(e){var t=e.notes,n=e.onSelect,o=e.onDeselect,r=e.onSubmitComment,s=e.onSubmitReply,m=Object(c.a)(e,["notes","onSelect","onDeselect","onSubmitComment","onSubmitReply"]),u=Object(i.useState)(null),d=Object(a.a)(u,2),b=d[0],f=d[1];return b&&void 0===t.find((function(e){return e.id===b}))&&f(null),l.a.createElement("div",{id:"notes-row"},l.a.createElement(P,Object.assign({className:"main-thread"+(b?" main-thread-inactive":""),notes:t,onSelect:n,onDeselect:o,onSubmitComment:r,onReplyNote:function(e){n(t.find((function(t){return t.id===e})).camera),f(e)}},m)),l.a.createElement(z,Object.assign({className:"active-thread"+(b?"":" active-thread-inactive"),note:t.find((function(e){return e.id===b})),onReturn:function(){return f(null)},onSubmitReply:s},m)))}var x=[{id:1,camera:{position:[3.6724893617668513,.10448181831762553,-.10443959458119491],focus:[0,0,0]},pin:{color:"#ff7a7a"},author:"Palvi Mehta",date:(new Date).getTime(),comment:"I dont like how the openings end before the bottom of the black canvas, what can we do about this?",thread:[]},{id:2,camera:{position:[-.2391278466290959,.2413250726086689,1.7599386342780603],focus:[0,0,0]},pin:{color:"#ffe279"},author:"Ed Lazowska",date:k(new Date,-1).getTime(),comment:"I'm really proud of the lacing design here, do we think it will be too complicated?",thread:[]},{id:3,camera:{position:[1.2556252511652628,-1.8845128318655633,-.006335531414734807],focus:[1.2637327202535016,0,-.09982552431336995]},pin:{color:"#ffc37c"},author:" Kabir Shahani",date:k(new Date,-2).getTime(),comment:"I love the differnent fonts, but make the nike and zoom closer together in size",thread:[]}],G=["#c4c4c4","#ff7a7a","#ffe279","#ffc37c"];m.a.render(l.a.createElement((function(){var e=Object(i.useState)(void 0),t=Object(a.a)(e,2),n=t[0],s=t[1],m=Object(i.useState)(void 0),u=Object(a.a)(m,2),d=u[0],b=u[1],f=Object(i.useState)(void 0),p=Object(a.a)(f,2),v=p[0],h=p[1],O=Object(i.useState)(x),E=Object(a.a)(O,2),j=E[0],S=E[1];return l.a.createElement(l.a.Fragment,null,l.a.createElement(N,null),l.a.createElement("div",{id:"main-area"},l.a.createElement("div",{id:"variations-column"}),l.a.createElement(g,{id:"three-renderer",cameraPosition:n,setCamera:function(e){return b(e)},setOrbitControls:function(e){return h(e)}}),l.a.createElement(A,{notes:j,onSubmitComment:function(e){return S(function(e,t,n,a){return[{id:1+Math.max.apply(Math,Object(r.a)(e.map((function(e){return e.id})))),camera:{position:t.position.toArray(),focus:n.target.toArray()},pin:{color:G[Math.floor(Math.random()*G.length)]},author:"Greg Gottesman",date:(new Date).getTime(),comment:a,thread:[]}].concat(Object(r.a)(e))}(j,d,v,e))},onSubmitReply:function(e,t){return S(function(e,t,n){return e.map((function(e){var a=e.thread,i=Object(c.a)(e,["thread"]);return i.id===t?Object(o.a)({},i,{thread:[{id:1+Math.max.apply(Math,[t].concat(Object(r.a)(a.map((function(e){return e.id}))))),pin:{color:i.pin.color},author:"Greg Gottesman",date:(new Date).getTime(),comment:n}].concat(Object(r.a)(a))}):Object(o.a)({thread:a},i)}))}(j,e,t))},onSelect:function(e){return s(e)},onDeselect:function(){return s(null)},onResolveNote:function(e){return S(function(e,t){return t.filter((function(t){return t.id!==e})).map((function(t){var n=t.thread,a=Object(c.a)(t,["thread"]);return Object(o.a)({thread:n.filter((function(t){return t.id!==e}))},a)}))}(e,j))}})))}),null),document.getElementById("root"))}},[[30,1,2]]]);
//# sourceMappingURL=main.3ab39e9f.chunk.js.map