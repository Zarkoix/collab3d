{"version":3,"sources":["ModelRenderer.js","Header/Header.js","Note/Note.js","ConfirmResolve/ConfirmResolve.js","NotesColumn/MainThread/MainThread.js","NotesColumn/Thread/Thread.js","NotesColumn/NotesColumn.js","index.js"],"names":["Pin","color","radius","position","visible","Vector3","attach","args","Model","setModelSize","props","gltf","useLoader","GLTFLoader","useEffect","maxVector","Box3","setFromObject","scene","max","length","object","Controls","cameraPosition","modelSize","controls","updateCamera","target","camera","set","current","update","useThree","domElement","gl","setLength","toArray","focus","ref","ModelRenderer","notes","setCamera","setOrbitControls","useState","useRef","fov","near","onCreated","outputEncoding","sRGBEncoding","background","Color","minDistance","maxDistance","fallback","onClick","point","map","id","pin","key","extend","OrbitControls","Header","className","alert","alt","src","React","Component","addDays","date","days","result","Date","valueOf","setDate","getDate","Note","selected","white","author","comment","thread","onResolve","onReply","showReply","style","backgroundColor","event","stopPropagation","dateInMillis","today","toDateString","toLocaleTimeString","navigator","language","timeStyle","toLocaleDateString","dateStyle","dateString","replyString","children","ConfirmResolve","isModalOpen","onCancel","MainThread","onSubmitComment","onSelect","onDeselect","onResolveNote","onReplyNote","setSelected","resolveNoteId","setResolveNoteId","undefined","inputComment","setInputComment","placeholder","value","onChange","index","note","Thread","onReturn","onSubmitReply","replyComment","setReplyComment","deleteNoteId","setDeleteNoteId","autoFocus","onKeyPress","preventDefault","NotesColumn","activeThread","setActiveThread","find","NOTES","getTime","colors","ReactDOM","render","setCameraPosition","setControls","setNotes","Math","floor","random","addComment","addReply","filter","deleteNote","document","getElementById"],"mappings":"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","file":"static/js/main.b9df321c.chunk.js","sourcesContent":["import React, { Suspense, useRef, useState, useEffect } from \"react\";\r\nimport { OrbitControls } from \"three/examples/jsm/controls/OrbitControls\";\r\nimport { Canvas, useThree, extend, useLoader } from \"react-three-fiber\";\r\nimport { GLTFLoader } from \"three/examples/jsm/loaders/GLTFLoader\";\r\nimport { Box3, Vector3, Color, sRGBEncoding } from \"three\";\r\n\r\nextend({ OrbitControls });\r\n\r\nfunction Pin({ color, radius, position, ...props }) {\r\n  return (\r\n    <mesh visible position={position || new Vector3(0, 0, 0)}>\r\n      <sphereGeometry attach=\"geometry\" args={[radius, 20, 20]} />\r\n      <meshStandardMaterial attach=\"material\" color={color} />\r\n    </mesh>\r\n  );\r\n}\r\n\r\nfunction Model({ setModelSize, ...props }) {\r\n  const gltf = useLoader(GLTFLoader, \"models/gltf/sneaker3/scene.gltf\");\r\n\r\n  useEffect(() => {\r\n    const maxVector = new Box3().setFromObject(gltf.scene).max;\r\n    setModelSize(maxVector.length());\r\n  }, [gltf, setModelSize]);\r\n\r\n  return <primitive object={gltf.scene} position={[0, 0, 0]} {...props} />;\r\n}\r\n\r\nfunction Controls({ cameraPosition, modelSize, controls, ...props }) {\r\n  function updateCamera(position, target, camera, controls) {\r\n    camera.position.set(...position);\r\n    controls.current.target.set(...target);\r\n    controls.current.update();\r\n  }\r\n\r\n  const {\r\n    camera,\r\n    gl: { domElement }\r\n  } = useThree();\r\n\r\n  useEffect(() => {\r\n    if (modelSize) {\r\n      updateCamera(\r\n        new Vector3(1, 0.5, 1).setLength(2 * modelSize).toArray(),\r\n        [0, 0, 0],\r\n        camera,\r\n        controls\r\n      );\r\n    }\r\n  }, [camera, modelSize, controls]);\r\n\r\n  useEffect(() => {\r\n    if (cameraPosition) {\r\n      updateCamera(\r\n        cameraPosition.position,\r\n        cameraPosition.focus,\r\n        camera,\r\n        controls\r\n      );\r\n      // console.log(new Vector3(...cameraPosition.position).setLength(2 * modelSize).toArray());\r\n    }\r\n  }, [camera, cameraPosition, controls]);\r\n\r\n  return (\r\n    <orbitControls ref={controls} args={[camera, domElement]} {...props} />\r\n  );\r\n}\r\n\r\nexport function ModelRenderer({\r\n  cameraPosition,\r\n  notes,\r\n  setCamera,\r\n  setOrbitControls,\r\n  ...props\r\n}) {\r\n  const [modelSize, setModelSize] = useState();\r\n\r\n  const controls = useRef();\r\n  useEffect(() => {\r\n    setOrbitControls(controls.current);\r\n  }, [controls, setOrbitControls]);\r\n\r\n  return (\r\n    <Canvas\r\n      camera={{ fov: 60, near: 1 }}\r\n      onCreated={({ gl, scene, camera }) => {\r\n        gl.outputEncoding = sRGBEncoding;\r\n        scene.background = new Color(0xfafafa);\r\n\r\n        setCamera(camera);\r\n      }}\r\n      {...props}\r\n    >\r\n      <Controls\r\n        cameraPosition={cameraPosition}\r\n        modelSize={modelSize}\r\n        controls={controls}\r\n        minDistance={1}\r\n        maxDistance={modelSize ? 5 * modelSize : 50}\r\n      />\r\n      <ambientLight />\r\n      <Suspense fallback={null}>\r\n        <Model\r\n          setModelSize={setModelSize}\r\n          onClick={({ point }) => {\r\n            // console.log(point.toArray());\r\n          }}\r\n        />\r\n      </Suspense>\r\n      {notes.map(({ id, pin }) => (\r\n        <Pin\r\n          key={id}\r\n          color={pin.color}\r\n          radius={modelSize ? 0.02 * modelSize : 0.1}\r\n          position={pin.position}\r\n        />\r\n      ))}\r\n    </Canvas>\r\n  );\r\n}\r\n","import React from \"react\";\r\nimport \"./Header.css\";\r\n\r\nclass Header extends React.Component {\r\n  render() {\r\n    return (\r\n      <div className=\"head\">\r\n        <div className=\"greeting-row\">\r\n          <span className=\"greeting\">Welcome Username!</span>\r\n        </div>\r\n        <div className=\"button-row\">\r\n          <div className=\"buttons\">\r\n            <button\r\n              className=\"share\"\r\n              onClick={() => alert(\"share link copied\")}\r\n            >\r\n              <span className=\"textShare\">Share</span>\r\n            </button>\r\n            <button\r\n              className=\"AR\"\r\n              onClick={() => alert(\"more features to come\")}\r\n            >\r\n              <span className=\"textAR\">AR</span>\r\n            </button>\r\n          </div>\r\n          <img\r\n            className=\"profile\"\r\n            alt=\"Greg\"\r\n            src=\"https://assets.website-files.com/5d3152346d95065922960b3a/5db769036b1dff3418bffd20_Greg.jpg\"\r\n          />\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport default Header;\r\n","import React from \"react\";\r\nimport \"./Note.css\";\r\n\r\nexport function addDays(date, days) {\r\n  const result = new Date(date.valueOf());\r\n  result.setDate(date.getDate() + days);\r\n  return result;\r\n}\r\n\r\nfunction dateString(dateInMillis) {\r\n  const today = new Date();\r\n  const date = new Date(dateInMillis);\r\n\r\n  if (today.toDateString() === date.toDateString()) {\r\n    return `${date.toLocaleTimeString(navigator.language, {\r\n      timeStyle: \"short\"\r\n    })} Today`;\r\n  } else if (today.toDateString() === addDays(date, 1).toDateString()) {\r\n    return \"Yesterday\";\r\n  } else {\r\n    return date.toLocaleDateString(navigator.language, { dateStyle: \"medium\" });\r\n  }\r\n}\r\n\r\nfunction replyString(thread) {\r\n  if (thread && thread.length > 0) {\r\n    if (thread.length > 1) {\r\n      return `${thread.length} Replies`;\r\n    } else {\r\n      return \"1 Reply\";\r\n    }\r\n  } else {\r\n    return \"Reply\";\r\n  }\r\n}\r\n\r\nexport function Note({\r\n  selected,\r\n  white,\r\n  pin,\r\n  author,\r\n  date,\r\n  comment,\r\n  thread,\r\n  onResolve,\r\n  onReply,\r\n  showReply = true,\r\n  ...props\r\n}) {\r\n  return (\r\n    <div className=\"wrapper\">\r\n      <div className={selected ? \"selected-bar\" : \"\"}></div>\r\n      <div className={\"note\" + (selected ? \" selected\" : \"\")} {...props}>\r\n        <div className={\"note-content\" + (selected ? \" selected\" : \"\")}>\r\n          <div className=\"note-top-row\">\r\n            <img\r\n              className=\"pin-color\"\r\n              alt=\"\"\r\n              style={{ backgroundColor: pin.color }}\r\n            />\r\n            <div className=\"note-top-column\">\r\n              <div className=\"author-row\">\r\n                <div className=\"author-name\">{author}</div>\r\n                <button\r\n                  className={\"resolve\" + (thread ? \" main-comment\" : \"\")}\r\n                  onClick={event => {\r\n                    event.stopPropagation();\r\n                    onResolve();\r\n                  }}\r\n                >\r\n                  Resolve\r\n                </button>\r\n              </div>\r\n              <div className=\"note-date\">{dateString(date)}</div>\r\n            </div>\r\n          </div>\r\n          <p className=\"comment\">{comment}</p>\r\n          {showReply ? (\r\n            <div className=\"reply-row\">\r\n              <button\r\n                className=\"reply-button\"\r\n                onClick={event => {\r\n                  event.stopPropagation();\r\n                  onReply();\r\n                }}\r\n              >\r\n                {replyString(thread)}\r\n              </button>\r\n            </div>\r\n          ) : null}\r\n        </div>\r\n        {props.children}\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n","import React from \"react\";\r\nimport \"./ConfirmResolve.css\";\r\n\r\nexport function ConfirmResolve({ isModalOpen, onCancel, onResolve, ...props }) {\r\n  return (\r\n    <div id=\"modal\" className={isModalOpen ? \"\" : \"hide\"} onClick={onCancel}>\r\n      <div\r\n        id=\"modal-dialog\"\r\n        onClick={event => event.stopPropagation()}\r\n        {...props}\r\n      >\r\n        <span id=\"modal-warning\">Are you sure you want to resolve?</span>\r\n        <div id=\"modal-actions\">\r\n          <span\r\n            id=\"modal-cancel\"\r\n            onClick={event => {\r\n              event.stopPropagation();\r\n              onCancel();\r\n            }}\r\n          >\r\n            Cancel\r\n          </span>\r\n          <span\r\n            id=\"modal-submit\"\r\n            onClick={event => {\r\n              event.stopPropagation();\r\n              onResolve();\r\n            }}\r\n          >\r\n            Submit\r\n          </span>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n","import React, { useState } from \"react\";\r\nimport TextareaAutosize from \"react-autosize-textarea/lib\";\r\nimport { Note } from \"../../Note/Note\";\r\nimport { ConfirmResolve } from \"../../ConfirmResolve/ConfirmResolve\";\r\nimport \"./MainThread.css\";\r\n\r\nexport function MainThread({\r\n  notes,\r\n  onSubmitComment,\r\n  onSelect,\r\n  onDeselect,\r\n  onResolveNote,\r\n  onReplyNote,\r\n  ...props\r\n}) {\r\n  const [selected, setSelected] = useState(null);\r\n  const [resolveNoteId, setResolveNoteId] = useState(null);\r\n  const [inputComment, setInputComment] = useState(undefined);\r\n\r\n  return (\r\n    <div id=\"notes-column\" {...props}>\r\n      <div id=\"input-column\">\r\n        <span id=\"input-label\">Comments</span>\r\n        <TextareaAutosize\r\n          id=\"input-comment\"\r\n          placeholder=\"Add a comment\"\r\n          value={inputComment}\r\n          onChange={event => setInputComment(event.target.value)}\r\n        />\r\n        <div id=\"input-actions\">\r\n          <button\r\n            id=\"input-cancel\"\r\n            className={inputComment ? \"enabled\" : \"\"}\r\n            onClick={() => inputComment && setInputComment(\"\")}\r\n          >\r\n            Cancel\r\n          </button>\r\n          <button\r\n            id=\"input-submit\"\r\n            className={inputComment ? \"enabled\" : \"\"}\r\n            onClick={() => {\r\n              if (inputComment) {\r\n                onSubmitComment(inputComment);\r\n                setInputComment(\"\");\r\n              }\r\n            }}\r\n          >\r\n            Submit\r\n          </button>\r\n        </div>\r\n      </div>\r\n      <div className=\"scroll-column\">\r\n        {notes.map(({ id, camera, ...note }, index) => (\r\n          <Note\r\n            key={id}\r\n            selected={id === selected}\r\n            white={index % 2 === 1}\r\n            onClick={() => {\r\n              if (selected === id) {\r\n                onDeselect();\r\n                setSelected(null);\r\n              } else {\r\n                onSelect(camera);\r\n                setSelected(id);\r\n              }\r\n            }}\r\n            onResolve={() => setResolveNoteId(id)}\r\n            onReply={comment => {\r\n              setSelected(id);\r\n              onReplyNote(id, comment);\r\n            }}\r\n            {...note}\r\n          ></Note>\r\n        ))}\r\n      </div>\r\n      <ConfirmResolve\r\n        isModalOpen={resolveNoteId}\r\n        onCancel={() => setResolveNoteId(null)}\r\n        onResolve={() => {\r\n          onResolveNote(resolveNoteId);\r\n          setResolveNoteId(null);\r\n        }}\r\n      />\r\n    </div>\r\n  );\r\n}\r\n","import React, { useState } from \"react\";\r\nimport \"./Thread.css\";\r\nimport { Note } from \"../../Note/Note\";\r\nimport TextareaAutosize from \"react-autosize-textarea/lib\";\r\nimport { ConfirmResolve } from \"../../ConfirmResolve/ConfirmResolve\";\r\n\r\nexport function Thread({\r\n  note,\r\n  onReturn,\r\n  onSubmitReply,\r\n  onResolveNote,\r\n  ...props\r\n}) {\r\n  const [replyComment, setReplyComment] = useState(undefined);\r\n  const [deleteNoteId, setDeleteNoteId] = useState(null);\r\n\r\n  return note ? (\r\n    <div id=\"thread-column\" {...props}>\r\n      <div\r\n        id=\"back-to-comments-row\"\r\n        onClick={() => {\r\n          onReturn();\r\n          setReplyComment(\"\");\r\n        }}\r\n      >\r\n        <i id=\"back-to-comments-icon\" className=\"material-icons\">\r\n          chevron_left\r\n        </i>\r\n        Back to all comments\r\n      </div>\r\n      <Note\r\n        selected\r\n        onResolve={() => setDeleteNoteId(note.id)}\r\n        showReply={false}\r\n        {...note}\r\n      >\r\n        <TextareaAutosize\r\n          id=\"reply-comment\"\r\n          placeholder=\"Add a reply\"\r\n          autoFocus\r\n          value={replyComment}\r\n          onChange={event => setReplyComment(event.target.value)}\r\n          onKeyPress={event => {\r\n            if (event.key === \"Enter\") {\r\n              event.preventDefault();\r\n              onSubmitReply(note.id, replyComment);\r\n              setReplyComment(\"\");\r\n            }\r\n          }}\r\n        />\r\n      </Note>\r\n      <div className=\"scroll-column\">\r\n        {note &&\r\n          note.thread.map(note => (\r\n            <Note\r\n              key={note.id}\r\n              white\r\n              onResolve={() => setDeleteNoteId(note.id)}\r\n              showReply={false}\r\n              {...note}\r\n            />\r\n          ))}\r\n      </div>\r\n      <ConfirmResolve\r\n        isModalOpen={deleteNoteId}\r\n        onCancel={() => setDeleteNoteId(null)}\r\n        onResolve={() => {\r\n          onResolveNote(deleteNoteId);\r\n          setDeleteNoteId(null);\r\n        }}\r\n      />\r\n    </div>\r\n  ) : null;\r\n}\r\n","import React, { useState } from \"react\";\r\nimport { MainThread } from \"./MainThread/MainThread\";\r\nimport \"./NotesColumn.css\";\r\nimport { Thread } from \"./Thread/Thread\";\r\n\r\nexport function NotesColumn({\r\n  notes,\r\n  onSelect,\r\n  onDeselect,\r\n  onSubmitComment,\r\n  onSubmitReply,\r\n  ...props\r\n}) {\r\n  const [activeThread, setActiveThread] = useState(null);\r\n\r\n  if (\r\n    activeThread &&\r\n    notes.find(({ id }) => id === activeThread) === undefined\r\n  ) {\r\n    setActiveThread(null);\r\n  }\r\n\r\n  return (\r\n    <div id=\"notes-row\">\r\n      <MainThread\r\n        className={\r\n          \"main-thread\" + (activeThread ? \" main-thread-inactive\" : \"\")\r\n        }\r\n        notes={notes}\r\n        onSelect={onSelect}\r\n        onDeselect={onDeselect}\r\n        onSubmitComment={onSubmitComment}\r\n        onReplyNote={id => {\r\n          onSelect(notes.find(note => note.id === id).camera);\r\n          setActiveThread(id);\r\n        }}\r\n        {...props}\r\n      />\r\n      <Thread\r\n        className={\r\n          \"active-thread\" + (!activeThread ? \" active-thread-inactive\" : \"\")\r\n        }\r\n        note={notes.find(note => note.id === activeThread)}\r\n        onReturn={() => setActiveThread(null)}\r\n        onSubmitReply={onSubmitReply}\r\n        {...props}\r\n      />\r\n    </div>\r\n  );\r\n}\r\n","import React, { useState } from \"react\";\r\nimport ReactDOM from \"react-dom\";\r\nimport { ModelRenderer } from \"./ModelRenderer\";\r\nimport \"bootstrap/dist/css/bootstrap.min.css\";\r\nimport \"./index.css\";\r\nimport Header from \"./Header/Header\";\r\nimport { NotesColumn } from \"./NotesColumn/NotesColumn\";\r\nimport { addDays } from \"./Note/Note\";\r\n\r\nconst NOTES = [\r\n  {\r\n    id: 1,\r\n    camera: {\r\n      position: [0.3282675233596228, 1.3130700934384911, 1.9696051401577368],\r\n      focus: [0, 0, 0]\r\n    },\r\n    pin: {\r\n      color: \"#ff7a7a\",\r\n      position: [0.11407216428677569, -0.03558226575391574, 0.3088370287923448]\r\n    },\r\n    author: \"Greg Gottesman\",\r\n    date: new Date().getTime(),\r\n    comment:\r\n      \"This is great feature to add. But have we thought about how it will work with the new intiative rolling out?\",\r\n    thread: []\r\n  },\r\n  {\r\n    id: 2,\r\n    camera: {\r\n      position: [1.3130700934384913, 1.9696051401577368, 0.32826752335962284],\r\n      focus: [0, 0, 0]\r\n    },\r\n    pin: {\r\n      color: \"#ffe279\",\r\n      position: [0.8400521034159677, 0.2894499388169279, -0.021046456389922318]\r\n    },\r\n    author: \"Ed Lazowska\",\r\n    date: addDays(new Date(), -1).getTime(),\r\n    comment:\r\n      \"I disagree with the design choice here. I believe that weather resistant material would be better used here.\",\r\n    thread: []\r\n  },\r\n  {\r\n    id: 3,\r\n    camera: {\r\n      position: [-2.1616768198406255, 0.7205589399468751, 0.7205589399468751],\r\n      focus: [0, 0, 0]\r\n    },\r\n    pin: {\r\n      color: \"#ffc37c\",\r\n      position: [-0.9929302640832274, -0.23019978143549039, 0.08149487964996077]\r\n    },\r\n    author: 'Dawy \"The Boulder\" Johnson',\r\n    date: addDays(new Date(), -2).getTime(),\r\n    comment:\r\n      \"Have we thought about the cool factor associated with adding a flap here?  I’ve seeing market research that it is popular with our target demo.\",\r\n    thread: []\r\n  }\r\n];\r\n\r\nconst colors = [\"#c4c4c4\", \"#ff7a7a\", \"#ffe279\", \"#ffc37c\"];\r\n\r\nconst addComment = (notes, camera, controls, comment) => [\r\n  {\r\n    id: 1 + Math.max(...notes.map(({ id }) => id)),\r\n    camera: {\r\n      position: camera.position.toArray(),\r\n      focus: controls.target.toArray()\r\n    },\r\n    pin: { color: colors[Math.floor(Math.random() * colors.length)] },\r\n    author: \"Greg Gottesman\",\r\n    date: new Date().getTime(),\r\n    comment: comment,\r\n    thread: []\r\n  },\r\n  ...notes\r\n];\r\n\r\nconst addReply = (notes, id, comment) =>\r\n  notes.map(({ thread, ...note }) =>\r\n    note.id === id\r\n      ? {\r\n          ...note,\r\n          thread: [\r\n            {\r\n              id: 1 + Math.max(id, ...thread.map(({ id }) => id)),\r\n              pin: { color: note.pin.color },\r\n              author: \"Greg Gottesman\",\r\n              date: new Date().getTime(),\r\n              comment: comment\r\n            },\r\n            ...thread\r\n          ]\r\n        }\r\n      : { thread, ...note }\r\n  );\r\n\r\nconst deleteNote = (id, notes) =>\r\n  notes\r\n    .filter(note => note.id !== id)\r\n    .map(({ thread, ...note }) => ({\r\n      thread: thread.filter(note => note.id !== id),\r\n      ...note\r\n    }));\r\n\r\nfunction MainPage() {\r\n  const [cameraPosition, setCameraPosition] = useState(undefined);\r\n  const [camera, setCamera] = useState(undefined);\r\n  const [controls, setControls] = useState(undefined);\r\n  const [notes, setNotes] = useState(NOTES);\r\n\r\n  return (\r\n    <>\r\n      <Header />\r\n      <div id=\"main-area\">\r\n        <div id=\"variations-column\"></div>\r\n        <ModelRenderer\r\n          id=\"three-renderer\"\r\n          cameraPosition={cameraPosition}\r\n          notes={notes}\r\n          setCamera={camera => setCamera(camera)}\r\n          setOrbitControls={controls => setControls(controls)}\r\n        />\r\n        <NotesColumn\r\n          notes={notes}\r\n          onSubmitComment={comment =>\r\n            setNotes(addComment(notes, camera, controls, comment))\r\n          }\r\n          onSubmitReply={(id, comment) =>\r\n            setNotes(addReply(notes, id, comment))\r\n          }\r\n          onSelect={cameraPosition => setCameraPosition(cameraPosition)}\r\n          onDeselect={() => setCameraPosition(null)}\r\n          onResolveNote={id => setNotes(deleteNote(id, notes))}\r\n        />\r\n      </div>\r\n    </>\r\n  );\r\n}\r\n\r\nReactDOM.render(<MainPage />, document.getElementById(\"root\"));\r\n"],"sourceRoot":""}