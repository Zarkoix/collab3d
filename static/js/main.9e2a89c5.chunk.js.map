{"version":3,"sources":["ModelRenderer.js","Header/Header.js","Note/Note.js","ConfirmResolve/ConfirmResolve.js","NotesColumn/MainThread/MainThread.js","NotesColumn/Thread/Thread.js","NotesColumn/NotesColumn.js","DrawCanvas/DrawCanvas.js","DrawOver/DrawOver.js","notes.js","index.js"],"names":["Model","setModelSize","props","gltf","useLoader","GLTFLoader","useEffect","mroot","scene","bbox","Box3","setFromObject","cent","getCenter","Vector3","size","getSize","maxAxis","Math","max","x","y","z","scale","multiplyScalar","position","copy","object","Controls","cameraPosition","modelSize","controls","onOrbitChange","updateCamera","target","camera","updateEventListener","set","addEventListener","update","useThree","domElement","gl","setLength","toArray","current","focus","ref","removeEventListener","args","ModelRenderer","setCamera","setOrbitControls","useState","undefined","useRef","fov","near","onCreated","outputEncoding","sRGBEncoding","background","Color","minDistance","maxDistance","fallback","extend","OrbitControls","Header","className","onClick","alert","alt","src","React","Component","addDays","date","days","result","Date","valueOf","setDate","getDate","Note","classObj","selected","pin","white","drawOver","author","comment","thread","onResolve","onReply","showReply","drawover","Object","keys","reduce","acc","key","trimRight","style","backgroundColor","color","event","stopPropagation","dateInMillis","today","toDateString","toLocaleTimeString","navigator","language","timeStyle","toLocaleDateString","dateStyle","dateString","length","replyString","children","ConfirmResolve","isModalOpen","onCancel","id","MainThread","notes","cursor","onSubmitComment","onSelect","onDeselect","onResolveNote","onReplyNote","allowRedraw","onRedraw","resolveNoteId","setResolveNoteId","inputComment","setInputComment","CURSOR","DEFAULT","substr","toUpperCase","DRAWOVER","placeholder","autoFocus","value","onChange","map","index","note","Thread","onReturn","onSubmitReply","replyComment","setReplyComment","deleteNoteId","setDeleteNoteId","onKeyPress","preventDefault","NotesColumn","activeThread","setActiveThread","find","handleUndo","isPainting","setPainting","filter","line","slice","handleClick","nativeEvent","offsetX","offsetY","clientWidth","clientHeight","handleDrag","currLine","convertTouchToMouse","handler","canvasRect","getBoundingClientRect","touch","targetTouches","pageX","left","pageY","top","DrawCanvas","lineWidth","lineColor","ctx","setContext","getContext","canvas","clearRect","width","height","rest","lineJoin","lineCap","strokeStyle","beginPath","moveTo","lineTo","stroke","paint","allowChanges","keyMap","undo","handlers","onMouseDown","onMouseMove","onMouseUp","onTouchStart","onTouchMove","onTouchEnd","onTouchCancel","DrawOver","active","drawing","NoteModel","this","NoteCamera","NotePin","getTime","COLORS","handleOrbitChange","selectedNote","setSelectedNote","setDrawing","every","p","i","abs","t","cameraPositionIs","ReactDOM","render","setControls","NOTES","setNotes","setCursor","newDrawing","JSON","parse","LZString","decompressFromEncodedURIComponent","flatMap","floor","random","compressToEncodedURIComponent","stringify","addComment","addReply","deleteNote","document","getElementById"],"mappings":"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","file":"static/js/main.9e2a89c5.chunk.js","sourcesContent":["import React, { Suspense, useRef, useState, useEffect } from \"react\";\r\nimport { OrbitControls } from \"three/examples/jsm/controls/OrbitControls\";\r\nimport { Canvas, useThree, extend, useLoader } from \"react-three-fiber\";\r\nimport { GLTFLoader } from \"three/examples/jsm/loaders/GLTFLoader\";\r\nimport { Box3, Vector3, Color, sRGBEncoding } from \"three\";\r\n\r\nextend({ OrbitControls });\r\n\r\nfunction Model({ setModelSize, ...props }) {\r\n  const gltf = useLoader(GLTFLoader, \"models/gltf/nike_shoe/scene.gltf\");\r\n\r\n  useEffect(() => {\r\n    //const maxVector = new Box3().setFromObject(gltf.scene).max;\r\n    //setModelSize(maxVector.length());\r\n\r\n    //Centering Object\r\n    var mroot = gltf.scene;\r\n    var bbox = new Box3().setFromObject(mroot);\r\n    var cent = bbox.getCenter(new Vector3());\r\n    var size = bbox.getSize(new Vector3());\r\n\r\n    //Rescale the object to normalized space\r\n    var maxAxis = Math.max(size.x, size.y, size.z);\r\n    mroot.scale.multiplyScalar(5.0 / maxAxis);\r\n    bbox.setFromObject(mroot);\r\n    bbox.getCenter(cent);\r\n    bbox.getSize(size);\r\n    mroot.position.copy(cent).multiplyScalar(-1);\r\n  }, [gltf, setModelSize]);\r\n\r\n  return <primitive object={gltf.scene} {...props} />;\r\n}\r\n\r\nfunction Controls({\r\n  cameraPosition,\r\n  modelSize,\r\n  controls,\r\n  onOrbitChange,\r\n  ...props\r\n}) {\r\n  function updateCamera(\r\n    position,\r\n    target,\r\n    camera,\r\n    controls,\r\n    updateEventListener = false,\r\n    onOrbitChange\r\n  ) {\r\n    camera.position.set(...position);\r\n    controls.target.set(...target);\r\n    if (updateEventListener) {\r\n      controls.addEventListener(\"change\", onOrbitChange);\r\n    }\r\n    controls.update();\r\n  }\r\n\r\n  const {\r\n    camera,\r\n    gl: { domElement }\r\n  } = useThree();\r\n\r\n  useEffect(() => {\r\n    if (modelSize) {\r\n      updateCamera(\r\n        new Vector3(1, 0.5, 1).setLength(2 * modelSize).toArray(),\r\n        [0, 0, 0],\r\n        camera,\r\n        controls.current\r\n      );\r\n    }\r\n  }, [camera, modelSize, controls]);\r\n\r\n  useEffect(() => {\r\n    if (cameraPosition) {\r\n      updateCamera(\r\n        cameraPosition.position,\r\n        cameraPosition.focus,\r\n        camera,\r\n        controls.current,\r\n        true,\r\n        onOrbitChange\r\n      );\r\n    }\r\n  }, [camera, cameraPosition, controls, onOrbitChange]);\r\n\r\n  useEffect(() => {\r\n    const ref = controls.current;\r\n    if (controls.current) {\r\n      ref.addEventListener(\"change\", onOrbitChange);\r\n    }\r\n\r\n    return () => ref.removeEventListener(\"change\", onOrbitChange);\r\n  }, [controls, onOrbitChange]);\r\n\r\n  return (\r\n    <orbitControls ref={controls} args={[camera, domElement]} {...props} />\r\n  );\r\n}\r\n\r\nexport function ModelRenderer({\r\n  cameraPosition,\r\n  onOrbitChange,\r\n  setCamera,\r\n  setOrbitControls,\r\n  ...props\r\n}) {\r\n  const [modelSize, setModelSize] = useState(undefined);\r\n\r\n  const controls = useRef();\r\n  useEffect(() => {\r\n    setOrbitControls(controls.current);\r\n  }, [controls, setOrbitControls]);\r\n\r\n  return (\r\n    <Canvas\r\n      camera={{ fov: 60, near: 1 }}\r\n      onCreated={({ gl, scene, camera }) => {\r\n        gl.outputEncoding = sRGBEncoding;\r\n        scene.background = new Color(0xfafafa);\r\n\r\n        setCamera(camera);\r\n      }}\r\n      {...props}\r\n    >\r\n      <Controls\r\n        cameraPosition={cameraPosition}\r\n        modelSize={modelSize}\r\n        controls={controls}\r\n        minDistance={1}\r\n        maxDistance={modelSize ? 5 * modelSize : 50}\r\n        onOrbitChange={onOrbitChange}\r\n      />\r\n      <ambientLight />\r\n      <Suspense fallback={null}>\r\n        <Model setModelSize={setModelSize} />\r\n      </Suspense>\r\n    </Canvas>\r\n  );\r\n}\r\n","import React from \"react\";\r\nimport \"./Header.css\";\r\n\r\nclass Header extends React.Component {\r\n  render() {\r\n    return (\r\n      <div className=\"head\">\r\n        <div className=\"greeting-row\">\r\n          <span className=\"greeting\">Welcome Greg!</span>\r\n        </div>\r\n        <div className=\"button-row\">\r\n          <div className=\"buttons\">\r\n            <button\r\n              className=\"share\"\r\n              onClick={() => alert(\"share link copied\")}\r\n            >\r\n              <span className=\"textShare\">Share</span>\r\n            </button>\r\n            <button\r\n              className=\"AR\"\r\n              onClick={() => alert(\"more features to come\")}\r\n            >\r\n              <span className=\"textAR\">AR</span>\r\n            </button>\r\n          </div>\r\n          <img\r\n            className=\"profile\"\r\n            alt=\"Greg\"\r\n            src=\"https://assets.website-files.com/5d3152346d95065922960b3a/5db769036b1dff3418bffd20_Greg.jpg\"\r\n          />\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport default Header;\r\n","import React from \"react\";\r\nimport \"./Note.css\";\r\n\r\nexport function addDays(date, days) {\r\n  const result = new Date(date.valueOf());\r\n  result.setDate(date.getDate() + days);\r\n  return result;\r\n}\r\n\r\nfunction dateString(dateInMillis) {\r\n  const today = new Date();\r\n  const date = new Date(dateInMillis);\r\n\r\n  if (today.toDateString() === date.toDateString()) {\r\n    return `${date.toLocaleTimeString(navigator.language, {\r\n      timeStyle: \"short\"\r\n    })} Today`;\r\n  } else if (today.toDateString() === addDays(date, 1).toDateString()) {\r\n    return \"Yesterday\";\r\n  } else {\r\n    return date.toLocaleDateString(navigator.language, { dateStyle: \"medium\" });\r\n  }\r\n}\r\n\r\nfunction replyString(thread) {\r\n  if (thread && thread.length > 0) {\r\n    if (thread.length > 1) {\r\n      return `${thread.length} Replies`;\r\n    } else {\r\n      return \"1 Reply\";\r\n    }\r\n  } else {\r\n    return \"Reply\";\r\n  }\r\n}\r\n\r\nfunction reduceToClassName(classObj) {\r\n  return Object.keys(classObj)\r\n    .reduce((acc, key) => (classObj[key] ? acc + key + \" \" : acc), \"\")\r\n    .trimRight();\r\n}\r\n\r\nexport function Note({\r\n  selected,\r\n  white,\r\n  pin,\r\n  drawOver,\r\n  author,\r\n  date,\r\n  comment,\r\n  thread,\r\n  onResolve,\r\n  onReply,\r\n  showReply = true,\r\n  ...props\r\n}) {\r\n  return (\r\n    <div className={\"wrapper\" + (selected ? \" selected\" : \"\")}>\r\n      <div className={selected ? \"selected-bar\" : \"\"}></div>\r\n      <div className=\"corner-tag-group\">\r\n        <div\r\n          className={reduceToClassName({\r\n            \"corner-tag\": true,\r\n            drawover: !!drawOver\r\n          })}\r\n        ></div>\r\n        {drawOver && (\r\n          <img className=\"icon\" src=\"assets/pencil.svg\" alt=\"pencil icon\" />\r\n        )}\r\n      </div>\r\n      <div className=\"note\" {...props}>\r\n        <div className=\"note-content\">\r\n          <div className=\"note-top-row\">\r\n            <img\r\n              className=\"pin-color\"\r\n              alt=\"\"\r\n              style={{ backgroundColor: pin.color }}\r\n            />\r\n            <div className=\"note-top-column\">\r\n              <div className=\"author-row\">\r\n                <div className=\"author-name\">{author}</div>\r\n                <div>\r\n                  <button\r\n                    className={\"resolve\" + (thread ? \" main-comment\" : \"\")}\r\n                    onClick={event => {\r\n                      event.stopPropagation();\r\n                      onResolve();\r\n                    }}\r\n                  >\r\n                    Resolve\r\n                  </button>\r\n                  <button className=\"more-options-button\">\r\n                    <img src=\"assets/dots.svg\" alt=\"more options icon\" />\r\n                  </button>\r\n                </div>\r\n              </div>\r\n              <div className=\"note-date\">{dateString(date)}</div>\r\n            </div>\r\n          </div>\r\n          <p className=\"comment\">{comment}</p>\r\n          {showReply ? (\r\n            <div className=\"reply-row\">\r\n              <button\r\n                className=\"reply-button\"\r\n                onClick={event => {\r\n                  event.stopPropagation();\r\n                  onReply();\r\n                }}\r\n              >\r\n                {replyString(thread)}\r\n              </button>\r\n              <button className=\"attachment-button\">\r\n                <img\r\n                  className=\"attachement-icon\"\r\n                  src=\"assets/clip.svg\"\r\n                  alt=\"attachment icon\"\r\n                />\r\n              </button>\r\n            </div>\r\n          ) : null}\r\n        </div>\r\n        {props.children}\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n","import React from \"react\";\r\nimport \"./ConfirmResolve.css\";\r\n\r\nexport function ConfirmResolve({ isModalOpen, onCancel, onResolve, ...props }) {\r\n  return (\r\n    <div id=\"modal\" className={isModalOpen ? \"\" : \"hide\"} onClick={onCancel}>\r\n      <div\r\n        id=\"modal-dialog\"\r\n        onClick={event => event.stopPropagation()}\r\n        {...props}\r\n      >\r\n        <span id=\"modal-warning\">Are you sure you want to resolve?</span>\r\n        <div id=\"modal-actions\">\r\n          <span\r\n            id=\"modal-cancel\"\r\n            onClick={event => {\r\n              event.stopPropagation();\r\n              onCancel();\r\n            }}\r\n          >\r\n            Cancel\r\n          </span>\r\n          <span\r\n            id=\"modal-submit\"\r\n            onClick={event => {\r\n              event.stopPropagation();\r\n              onResolve();\r\n            }}\r\n          >\r\n            Submit\r\n          </span>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n","import React, { useState } from \"react\";\r\nimport TextareaAutosize from \"react-autosize-textarea/lib\";\r\nimport { Note } from \"../../Note/Note\";\r\nimport { ConfirmResolve } from \"../../ConfirmResolve/ConfirmResolve\";\r\nimport \"./MainThread.css\";\r\nimport { CURSOR } from \"../../index\";\r\n\r\nexport function MainThread({\r\n  notes,\r\n  selected,\r\n  cursor,\r\n  onSubmitComment,\r\n  onCancel,\r\n  onSelect,\r\n  onDeselect,\r\n  onResolveNote,\r\n  onReplyNote,\r\n  allowRedraw,\r\n  onRedraw,\r\n  ...props\r\n}) {\r\n  const [resolveNoteId, setResolveNoteId] = useState();\r\n  const [inputComment, setInputComment] = useState();\r\n\r\n  return (\r\n    <div id=\"notes-column\" {...props}>\r\n      <div id=\"input-column\">\r\n        <div id=\"input-label-column\">\r\n          <div id=\"input-label-row\">\r\n            <span id=\"input-label\">\r\n              {cursor === CURSOR.DEFAULT\r\n                ? \"Comments\"\r\n                : `${cursor.substr(0, 1).toUpperCase()}${cursor.substr(1)}s`}\r\n            </span>\r\n            {cursor === CURSOR.DRAWOVER && allowRedraw && (\r\n              <button id=\"redraw-button\" onClick={onRedraw}>\r\n                Redraw\r\n              </button>\r\n            )}\r\n          </div>\r\n          {cursor !== CURSOR.DEFAULT && (\r\n            <div id=\"add-comment-row\">\r\n              <span id=\"add-comment-label\">Add a comment</span>\r\n              <div id=\"comment-required-group\">\r\n                <div className=\"red-circle\"></div>\r\n                <span id=\"comment-required\">Comment required</span>\r\n              </div>\r\n            </div>\r\n          )}\r\n        </div>\r\n        <TextareaAutosize\r\n          id=\"input-comment\"\r\n          placeholder={\r\n            cursor !== CURSOR.DEFAULT\r\n              ? `Comment is required for ${cursor}s`\r\n              : \"Add a comment\"\r\n          }\r\n          autoFocus={cursor !== CURSOR.DEFAULT}\r\n          value={inputComment}\r\n          onChange={event => setInputComment(event.target.value)}\r\n        />\r\n        <div id=\"input-actions\">\r\n          <button\r\n            id=\"input-cancel\"\r\n            className={\r\n              inputComment || cursor !== CURSOR.DEFAULT ? \"enabled\" : \"\"\r\n            }\r\n            onClick={() => {\r\n              setInputComment(\"\");\r\n              onCancel();\r\n            }}\r\n          >\r\n            Cancel\r\n          </button>\r\n          <button\r\n            id=\"input-submit\"\r\n            className={inputComment ? \"enabled\" : \"\"}\r\n            onClick={() => {\r\n              if (inputComment) {\r\n                onSubmitComment(inputComment);\r\n                setInputComment(\"\");\r\n              }\r\n            }}\r\n          >\r\n            Submit\r\n          </button>\r\n        </div>\r\n      </div>\r\n      <div\r\n        className={\r\n          \"scroll-column\" + (cursor !== CURSOR.DEFAULT ? \" focused\" : \"\")\r\n        }\r\n      >\r\n        {notes.map(({ id, camera, ...note }, index) => (\r\n          <Note\r\n            key={id}\r\n            selected={id === selected}\r\n            white={index % 2 === 1}\r\n            onClick={() => {\r\n              if (selected === id) {\r\n                onDeselect();\r\n              } else {\r\n                onSelect({ id, camera, ...note });\r\n              }\r\n            }}\r\n            onResolve={() => setResolveNoteId(id)}\r\n            onReply={comment => {\r\n              onReplyNote({ id, camera, ...notes }, comment);\r\n            }}\r\n            {...note}\r\n          ></Note>\r\n        ))}\r\n        {cursor !== CURSOR.DEFAULT && <div id=\"note-vignette\"></div>}\r\n      </div>\r\n      <ConfirmResolve\r\n        isModalOpen={resolveNoteId}\r\n        onCancel={() => setResolveNoteId(null)}\r\n        onResolve={() => {\r\n          onResolveNote(resolveNoteId);\r\n          setResolveNoteId(null);\r\n        }}\r\n      />\r\n    </div>\r\n  );\r\n}\r\n","import React, { useState } from \"react\";\r\nimport \"./Thread.css\";\r\nimport { Note } from \"../../Note/Note\";\r\nimport TextareaAutosize from \"react-autosize-textarea/lib\";\r\nimport { ConfirmResolve } from \"../../ConfirmResolve/ConfirmResolve\";\r\n\r\nexport function Thread({\r\n  note,\r\n  onReturn,\r\n  onSubmitReply,\r\n  onResolveNote,\r\n  ...props\r\n}) {\r\n  const [replyComment, setReplyComment] = useState(undefined);\r\n  const [deleteNoteId, setDeleteNoteId] = useState(null);\r\n\r\n  return note ? (\r\n    <div id=\"thread-column\" {...props}>\r\n      <div\r\n        id=\"back-to-comments-row\"\r\n        onClick={() => {\r\n          onReturn();\r\n          setReplyComment(\"\");\r\n        }}\r\n      >\r\n        <i id=\"back-to-comments-icon\" className=\"material-icons\">\r\n          chevron_left\r\n        </i>\r\n        Back to all comments\r\n      </div>\r\n      <Note\r\n        selected\r\n        onResolve={() => setDeleteNoteId(note.id)}\r\n        showReply={false}\r\n        {...note}\r\n      >\r\n        <TextareaAutosize\r\n          id=\"reply-comment\"\r\n          placeholder=\"Add a reply\"\r\n          autoFocus\r\n          value={replyComment}\r\n          onChange={event => setReplyComment(event.target.value)}\r\n          onKeyPress={event => {\r\n            if (event.key === \"Enter\") {\r\n              event.preventDefault();\r\n              onSubmitReply(note.id, replyComment);\r\n              setReplyComment(\"\");\r\n            }\r\n          }}\r\n        />\r\n      </Note>\r\n      <div className=\"scroll-column\">\r\n        {note &&\r\n          note.thread.map(note => (\r\n            <Note\r\n              key={note.id}\r\n              white\r\n              onResolve={() => setDeleteNoteId(note.id)}\r\n              showReply={false}\r\n              {...note}\r\n            />\r\n          ))}\r\n      </div>\r\n      <ConfirmResolve\r\n        isModalOpen={deleteNoteId}\r\n        onCancel={() => setDeleteNoteId(null)}\r\n        onResolve={() => {\r\n          onResolveNote(deleteNoteId);\r\n          setDeleteNoteId(null);\r\n        }}\r\n      />\r\n    </div>\r\n  ) : null;\r\n}\r\n","import React, { useState } from \"react\";\r\nimport { MainThread } from \"./MainThread/MainThread\";\r\nimport \"./NotesColumn.css\";\r\nimport { Thread } from \"./Thread/Thread\";\r\nimport { CURSOR } from \"../index\";\r\n\r\nexport function NotesColumn({\r\n  notes,\r\n  cursor,\r\n  onSelect,\r\n  onSubmitReply,\r\n  ...props\r\n}) {\r\n  const [activeThread, setActiveThread] = useState(null);\r\n\r\n  if (\r\n    activeThread &&\r\n    (cursor === CURSOR.DRAWOVER ||\r\n      notes.find(({ id }) => id === activeThread) === undefined)\r\n  ) {\r\n    setActiveThread(null);\r\n  }\r\n\r\n  return (\r\n    <div id=\"notes-row\">\r\n      <MainThread\r\n        className={\r\n          \"main-thread\" + (activeThread ? \" main-thread-inactive\" : \"\")\r\n        }\r\n        notes={notes}\r\n        cursor={cursor}\r\n        onSelect={onSelect}\r\n        onReplyNote={({ id, ...note }) => {\r\n          onSelect({ id, ...note });\r\n          setActiveThread(id);\r\n        }}\r\n        {...props}\r\n      />\r\n      <Thread\r\n        className={\r\n          \"active-thread\" + (!activeThread ? \" active-thread-inactive\" : \"\")\r\n        }\r\n        note={notes.find(note => note.id === activeThread)}\r\n        onReturn={() => setActiveThread(null)}\r\n        onSubmitReply={onSubmitReply}\r\n        {...props}\r\n      />\r\n    </div>\r\n  );\r\n}\r\n","import React, { useEffect, useState } from \"react\";\r\nimport \"./DrawCanvas.css\";\r\nimport { useRef } from \"react\";\r\nimport { HotKeys } from \"react-hotkeys\";\r\n\r\nfunction handleUndo(isPainting, setPainting, value, onChange) {\r\n  return () => {\r\n    if (isPainting) {\r\n      setPainting(false);\r\n    }\r\n    value = value.filter(line => line.length > 1);\r\n    if (value.length > 0) {\r\n      onChange && onChange(value.slice(0, value.length - 1));\r\n    }\r\n  };\r\n}\r\n\r\nfunction handleClick(setPainting, onChange, value, ref) {\r\n  return ({ nativeEvent }) => {\r\n    const { offsetX, offsetY } = nativeEvent;\r\n    setPainting(true);\r\n    onChange &&\r\n      onChange([\r\n        ...value,\r\n        [\r\n          {\r\n            x: offsetX / ref.current.clientWidth,\r\n            y: offsetY / ref.current.clientHeight\r\n          }\r\n        ]\r\n      ]);\r\n  };\r\n}\r\n\r\nfunction handleDrag(isPainting, value, onChange, ref) {\r\n  return ({ nativeEvent }) => {\r\n    if (isPainting) {\r\n      const { offsetX, offsetY } = nativeEvent;\r\n      if (value.length > 0) {\r\n        const currLine = value[value.length - 1];\r\n        onChange &&\r\n          onChange([\r\n            ...value.slice(0, value.length - 1),\r\n            [\r\n              ...currLine,\r\n              {\r\n                x: offsetX / ref.current.clientWidth,\r\n                y: offsetY / ref.current.clientHeight\r\n              }\r\n            ]\r\n          ]);\r\n      }\r\n    }\r\n  };\r\n}\r\n\r\nfunction convertTouchToMouse(handler) {\r\n  return ({ nativeEvent }) => {\r\n    const canvasRect = nativeEvent.target.getBoundingClientRect();\r\n    const touch = nativeEvent.targetTouches[0];\r\n    handler({\r\n      nativeEvent: {\r\n        offsetX: touch.pageX - canvasRect.left,\r\n        offsetY: touch.pageY - canvasRect.top\r\n      }\r\n    });\r\n  };\r\n}\r\n\r\nfunction paint(canvas, ctx, value, lineWidth, lineColor) {\r\n  if (ctx) {\r\n    ctx.clearRect(0, 0, canvas.width, canvas.height);\r\n\r\n    for (const line of value) {\r\n      const [{ x, y }, ...rest] = line;\r\n\r\n      ctx.lineJoin = \"round\";\r\n      ctx.lineCap = \"round\";\r\n      ctx.lineWidth = lineWidth;\r\n      ctx.strokeStyle = lineColor;\r\n\r\n      ctx.beginPath();\r\n      ctx.moveTo(x * canvas.width, y * canvas.height);\r\n      for (const { x, y } of rest) {\r\n        ctx.lineTo(x * canvas.width, y * canvas.height);\r\n      }\r\n      ctx.stroke();\r\n    }\r\n  }\r\n}\r\n\r\nexport function DrawCanvas({\r\n  lineWidth = 3,\r\n  lineColor = \"black\",\r\n  value,\r\n  onChange,\r\n  ...props\r\n}) {\r\n  value = value || [];\r\n  const ref = useRef();\r\n  const width = 1024;\r\n  const height = 1024;\r\n  const [ctx, setContext] = useState();\r\n  const [isPainting, setPainting] = useState(false);\r\n\r\n  useEffect(() => {\r\n    if (!ctx) {\r\n      setContext(ref.current.getContext(\"2d\"));\r\n    }\r\n  }, [ref, ctx]);\r\n  useEffect(() => paint(ref.current, ctx, value, lineWidth, lineColor), [\r\n    ref,\r\n    ctx,\r\n    value,\r\n    lineWidth,\r\n    lineColor\r\n  ]);\r\n\r\n  return (\r\n    <HotKeys\r\n      allowChanges\r\n      className=\"draw-canvas-hotkeys\"\r\n      keyMap={{ undo: [\"command+z\", \"ctrl+z\", \"backspace\"] }}\r\n      handlers={{\r\n        undo: handleUndo(isPainting, setPainting, value, onChange)\r\n      }}\r\n    >\r\n      <canvas\r\n        ref={ref}\r\n        className=\"draw-canvas\"\r\n        width={width}\r\n        height={height}\r\n        onMouseDown={handleClick(setPainting, onChange, value, ref)}\r\n        onMouseMove={handleDrag(isPainting, value, onChange, ref)}\r\n        onMouseUp={() => setPainting(false)}\r\n        onTouchStart={convertTouchToMouse(\r\n          handleClick(setPainting, onChange, value, ref)\r\n        )}\r\n        onTouchMove={convertTouchToMouse(\r\n          handleDrag(isPainting, value, onChange, ref)\r\n        )}\r\n        onTouchEnd={() => setPainting(false)}\r\n        onTouchCancel={handleUndo(isPainting, setPainting, value, onChange)}\r\n        {...props}\r\n      />\r\n    </HotKeys>\r\n  );\r\n}\r\n","import React from \"react\";\r\nimport \"./DrawOver.css\";\r\nimport { DrawCanvas } from \"../DrawCanvas/DrawCanvas\";\r\n\r\nexport function DrawOver({ active, drawing, onChange, children, ...props }) {\r\n  return (\r\n    <div id=\"sketch-container\" {...props}>\r\n      {children}\r\n      <div id=\"sketch-canvas\" className={onChange ? \"\" : \"static\"}>\r\n        <DrawCanvas lineWidth={2} lineColor=\"#ff0035\" value={drawing} onChange={onChange} />\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n","import { addDays } from \"./Note/Note\";\r\n\r\nexport class NoteModel {\r\n  /**\r\n   * @param {number} id\r\n   * @param {NoteCamera} camera\r\n   * @param {NotePin} pin\r\n   * @param {string} drawOver\r\n   * @param {string} author\r\n   * @param {Date} date\r\n   * @param {string} comment\r\n   * @param {NoteModel[]} thread\r\n   */\r\n  constructor(id, camera, pin, drawOver, author, date, comment, thread) {\r\n    this.id = id;\r\n    this.camera = camera;\r\n    this.pin = pin;\r\n    this.drawOver = drawOver;\r\n    this.author = author;\r\n    this.date = date;\r\n    this.comment = comment;\r\n    this.thread = thread || [];\r\n  }\r\n\r\n  id;\r\n  camera;\r\n  pin;\r\n  drawOver;\r\n  author;\r\n  date;\r\n  comment;\r\n  thread;\r\n}\r\n\r\nexport class NoteCamera {\r\n  /**\r\n   * @param {number[]} position \r\n   * @param {number[]} focus \r\n   */\r\n  constructor(position, focus) {\r\n    this.position = position;\r\n    this.focus = focus;\r\n  }\r\n\r\n  position;\r\n  focus;\r\n}\r\n\r\nexport class NotePin {\r\n  /**\r\n   * @param {string} color \r\n   */\r\n  constructor(color) {\r\n    this.color = color;\r\n  }\r\n\r\n  color;\r\n}\r\n\r\nexport default [\r\n  new NoteModel(\r\n    1,\r\n    new NoteCamera(\r\n      [3.6724893617668513, 0.10448181831762553, -0.10443959458119491],\r\n      [0, 0, 0]\r\n    ),\r\n    new NotePin(\"#ff7a7a\"),\r\n    null,\r\n    \"Palvi Mehta\",\r\n    new Date().getTime(),\r\n    \"I dont like how the openings end before the bottom of the black canvas, what can we do about this?\"\r\n  ),\r\n  new NoteModel(\r\n    2,\r\n    new NoteCamera(\r\n      [-0.2391278466290959, 0.2413250726086689, 1.7599386342780603],\r\n      [0, 0, 0]\r\n    ),\r\n    new NotePin(\"#ffe279\"),\r\n    null,\r\n    \"Ed Lazowska\",\r\n    addDays(new Date(), -1).getTime(),\r\n    \"I'm really proud of the lacing design here, do we think it will be too complicated?\"\r\n  ),\r\n  new NoteModel(\r\n    3,\r\n    new NoteCamera(\r\n      [1.2556252511652628, -1.8845128318655633, -0.006335531414734807],\r\n      [1.2637327202535016, 0, -0.09982552431336995]\r\n    ),\r\n    new NotePin(\"#ffc37c\"),\r\n    \"NrDeCIA9wLgBgHQGYCsSBMB2AbKjO91sAacAT1kQBYAOOATgEZs4k40rVHHMBfYiNHjIU2RujSjxksaQrCqmenDgFUNTJhrYJ-QZRE16mTiiMnU9OQcWYG9dEmzYq49Iyp6oBpxkXa-LVxHawVMDBp0KiosWgZmLyFEJ0wUdxS0xgyUUOpMLJM4KjM4RjTsPgFvYSQ7WtY6xtYc8ht82qoikrKiSv0akxckDSohkedchFH6UdFaGhQqejEaTyqk5C0mcK2eWqNJ0dSUTAlGZRokZfpEnxoeZ2GH3HuaQ4qUE7OLq+wb9buLCuNG0rHoIJYVHecxBi2WjEu6Dg2FuNRB6IxmKsrQUuEKxToPQq6FRyXoSGYjnJlKuFJa8moeM6BNK5VOpOQxlM5m5XMOKHoDicLjcBTW-WopTsMylDE6PH5gsczlc6HSJg5zM+qy6ZmZJBx1G6bJ4n1OKE1cBBFIul3OVtW-MJJuO5s13GwdCYzC93Ew-LEyI0cDVylULndFPYrijiyyjADjCDdlDKhw4uq1D2ux2Rj2BoZUykyZD6DD6c1SLVSirWAcIcTJdT4YzGxizDS7ewnfcFUbnpTZbTEYBCgkDgF46nAqQ-eDzYro+o6A0Jgcq6WK7ehqLgYHpfLI4lUwpOlpNOpLjng8PrZs6i5D4sAuvB+Hd4UtQw5y-7nJ4VfBcj0zKZ5WlMC5VKAsbDjcFFAiKIYj6EDolQtD0OiflXDg8IV0QrBNUUMskGiU5yVI2cd2KICkHUTQNE1FBShiYpmKiJisn5Gi6K0ZC20WVwBQEsp6AErih3DWizHoviYNOFxRPkpYvnpGDuOk3jGO0IwCU9GZpPEw8pNXBilymMQ0FWCzhlGMpoIUNIJLUDTTOPUZOHGDzBk4f0qMcoyeNclDu3uc4Qu4ZYzEM4djJkzVPWcBgEpYZYNGiyTAtksIynsfImMFPKoT81h7gqckjApMsLTMxReWfHkSP5ErmCUYZqSqzVNCRJQutUYxTiap4yrayrRM1e5aA8Cbpo8VSFFmFxYSWFYMCQcbODYWgNqKVZKMLaJu0WhZloRVbxvyJRaAumYNAVKiFvmOEVscTUmGowVZrLN69psA6YWO+FLler4FJB5STEOP6jqe07XoWVIlnhuFtEh2JfSBdgSOq48OJY3H2NZVGTHR1hMeKDkmKQ1AiiwanOCJuImAxjhsZApj8jVdm3HZ9AGZJtgWYp7hflKLJllFor9qQxnmFJwWzJQDwCaV1ilb5+JmaxoXwNlGUeATe6rV+GZDsetaFfOGY2EtzgGyokbxH6+xHCyxBHJrUsPerQ4HbLTRndqCmsGRT5g+7NJ8h9irHf9pVA4VilaOUROrlYDwo-ap249dhAOAROgSPz1gYgz0bY6FHO0Caeoa8j+3o796UK4pmMkzjWMY1LmOm5dlvBNE6IRIE3n68z8ve4VrbaJ27atq7xuA8rxW8PYcRIlXn7PwbrPm4V9u29b6MDf232d4nnHRHBFRL7odg-nns-44v8EhwFSJlDfh-x6ftmdAqOg-5aGREQH2N4Yp0RRArZwok7J-EVqIe+9swEZWkpAnGHMJCqG5lgze1B6jqQ0GgtmhQSGdFIcfe8yDnKEIpj1U4fVepKG3CfKhuAIEUx1MUPUupHRILfCgmhCtrT2mEbaXBJ5WGxSIRsScsiJzyJAXwghOAKapUSmolKnpQH8OoSohWBUcoGPysYbRyjpEGBYBIEUIY5hJgkKYpybDUEchYPvI+HcHEBWcWZFgkQdBJj8e4K0I8WE6KcYI48YhuDRJiTEkJlCwlSJcWUGy1krJlElgksxyTIi0RWI4JwCJ4mfkkewnxQTAkBKIO4ChJTEllMiRIVAYgmlSAkJkup2TynLDLDoHp-TfKhK6ZEpOadRkp2xEMxxSSfFPBwC8Z4wxil4NKd4yJeM2KqxYp48BayQIuGJE4I4yojg7IEXo9ZM1JrXPuGc3R5jhDdlyoY4whi7nhIufs0Odhw5h0+OIny9S9kbHCmFMwEVwrvJmZEzR2hYXqKhQ0-Z3Yoi9h7B2AF+DplIpBZ6eIPp8WelqSsoFETkUwIQRS6Bc0SXDP2acI5hyDkMsRcCixqR0gfE5akTFqyyUgqAYAgBvRblKOxWyx5uTClSvyby0lnyQWXBwEGWoLBPTDFZfyixcKko6o0ZqhVFixEiLtBcA1DzEB-EcOGIUNqQhiq8Vqx5VK4GwNEssk829v45z+KCyKoVIqQyNtcB6sJzaRMFLbG21tBQ0tAsGv4oaFjhpAnYK0iw03HUzUGy4IbTZho5IOL2dYqwAs6LmxN+bk2FtXivZe680g5uNkmtANbfk-O+SHJteb-qtrMjrHgkFB0zHVkzOWWt+1VP8cE6dzDfpow1uO8mk7OZYNXRg0dssBYTuPBgrm663Cbs1su3dWQuVno5QUSGLaTpA0ncYvKzzFbXqrTDO9p7Lq3U-fkOd80b2AxTRsfI-5vwgb-B06gW1cKRGiGjRghbur9UQ71X9kHVjQfwsTeD-bkP0LoUiVDoF0MIVg1hhDaoKOUao4NUqrVt6syA5gvda6zg0ZauVTODGDCnGLbxyZalxUmRzmREiRFyJiYg0WbCxG8KkcLWwHAtrFPWsGTBaT8FZNIXk3+X8P5cIeuKHuecjiPyIFwnp0Dv4DPFn3EBUzCBwjSoKbKpwTpWS9FNCpeTlNaY+fCM+vyccVSig6N5mm-nwtcEVEKYLaoxTyeZScplknbKImREmWzgHuOMoZYlo57wOhdGdL0Ek-b9jbHK9mfjuJCssiJOyMrl4qSnipCl19t6MDIkLV2dFKKYgGfawBpEFqHM9dRR2VFA3XTfATf8XddUFuuaopW3tt77P1UfGYR89lGQm1W4DdbWzlZ42JVMdo+JjS9G6-jI7xRTuKDFEV9zFRutjG8sMbyhwMOkZliNkwQRAgBCiEoL7JHpbo26+uTQm4Nzki+4rH4PbuyFv3Ux7Bqmwg92FKqdw63Uf49UF9rHsXcco+5ZkDI7gvuOvojoLjwhL2U4vZkQ4-MyZcB4Cj5p0hudNJ21MNnHAOfCZkDztpaB+e0E0wusdWWGei9aS0iXrPpfE0XXLszCutdLf2jJmD4OGBc-F7z5XVE9eYcZkbpXJudc2DhTjx7BIrdi+t5L+3IWLs0Gd4rnnbuAbPXS8iEXiMTjI1D0sVn-vTrDYy8H8E4f48I2q9QZQdWXSiBR9YqxrgbFXioqny7FRTR-ZOJcRQpeSKpC0IcGLIo4u1fp5rhRcjxwAtrw7hvKPm-d7bwb2XmMS-d+nHD-Pfet0D678P4fbfBckS4HjofciZ-q-Z4rBfU+l+TEbw5lvu+R+Fm38q9VR+lVqq36URHK2FKFrVaflVR-z8iObabObqbZ3VKnVTncTEhp0bHjfipD-GdL-A-ZqYaL1AAz-KA8-FSJ-ENYTd-RAkAgwdmD5IIccP7JA6A7-c5dAgUTAwArA8-Aec4c3aISA4A7A0AkgnCMHCgypSgrfbgViX-DjDXBzLAxg7-Zgn-WjNg+goAypJg2KPAgeUrXdTgoQ7gkQ7QccRYcQt-QgpQ07eBDzabBHbDCQ5Qrgg-fWdQkRdbSQj-Jgi6M0GbVYAQog7gy-PbI6Sw5QpgmwpNewqglApEILOvdUFwnQtwgOEnAobwqQg-ZRTSftIw-xLfEIoKIDcI5A4QTsWfUwG-e-W-VVZESIovfQi4QwlI3I-nNIWQoSdTXCSfPfVvSIwomgmTUoxfffFA7dUwHgkqBQoDCvcvLQSvUvLfBojnFgyIFHDo9osvKvQjNAC3fmTQ1NWxXPHPbPbo8Y9XSY1okPJPJGCPb-OfRWWaMApQFHFYsPJPbounKojTL3ftCnc9JnLfToXA2QkvFjAnDHN2G43RdAv7GHaHKHNccRWCMgpCQ-dyD7QEzya40+ceQ7G7SElQtPNQsw7rNFcbPrNUa47+EnFo7jMhTE1QLEp43OVQzIswhHeTHMSrHYZPPE+rTzc0c4BLY5HLE5LfIXLYvon0MLKmPzKLb-JkpooaM43dSzczMDD1T4bk7YoaeTO1BTK1BTRk6kpw5wBDPjWsEHLkuU2bUYP7IgcGLUxSIgONT4fvUUw-JLXLOk3EmzYzIyQtCzHTQUyTUQBeDw1Ua079HgG6H9LfaGDrYbdEhnF5R9IxFQr0obYBa0g9cM4U4MgPHQGtPWAdcCT0x6b00M-tBhPDJDK0RMpaEMmM1M9tEOCOLtb-KM6PFM3dBoCs2uBoLMqPNLXM8s9NRQFQLNZsmst9Tres-ZSNGNK2C-USNs5MzskFf1CFcFMFAcnM30y1MDG0vTCc6MqchAPSXSHSMwPSfUksusxcz0AuVwEEYufOec0soc7VdRZKXVCYYs8AsefIFxBYBERWe8p8xtK8v-MuW8nxGVIpPJb8z06898pY7VQlX0AlckhBN87uQCx5QVEVYBf+IM-8yClxeZOZR4e4eZP8iCxuKCy1XMCrEk0Y2zcVV-AVE0sin4oirxEi9lIdeMhgT0y03Zaix5V1SleBalBi1ZZiy1PFb0Xij0UVA-SipilxJEibHrCixilBbipchZFC9CtCzioFGSs8vVc8sC4S6SlxMckcsFQSlAzS5yFStit1di80wypxYy1JFJdJNAMCn5DLKSn1B9f0t5b-BypsJyFxOkvLZlLfDywy7yoEt7QE+ywPQKnxWY6Y7Pbgfy8KpylxVCuStC4UgKhK2ZMYggTK3ARYOKozKhRK4HIHfwYIfUtKgq2ZA+eMdxWK9y+KiqxpBtNeJEetVK+qnRFxH3Lq3Kuq-Kjq8pNHCMsq9qhcTqqAyglQ8q-qyJb8pzH8yIfy8w5-DPHxGy2ySyda+0tUitWw5JEWYWcWZgxahHdUw6ZJWJC67gVKpapHFxC8+FFKc07a5akbVIk-NIrRdym6q-O6txP6ra763anxUWfasWFgcQY6uAn6-Rd+dgF+D+cEH45626-RdStG0Y5G6GnGWoqcfIzGoGnGBqLbDbDGwGhaDhZctc1c7SSG+UlawmwQxmvGsms6hWfDNMxDUmk6na8mtm6UyUm1Wm06+m4hHEsWyalmkWmRZjGWziL67ml6imY-N62-AGhWlGnGLPaK2xIWnm1mzWl3Q2pGyWkbbULUbhLhXhA-fG3mi+EU+2h20QXWxWveZq2tJq429WrGtmS282zhJ2+WqGgmn23zSLPzZ2jWtmYEUEaOoEQUCO72mRQufc5O3c66r24OpOrIVOCZNONWoO22tmP5Qs9tCWjOwumRRE3rHsBOzOtw5ncnXHWuiulA4dCCOMsugu-WtmFWSEtiZu7umRA68GsGiWAeqWlAp9J9Tuum02h4+egaQO2eimMO1e+mJe4Wue3uzZDiMqk216AM15Fy-O5emqL4j4tcMscekbeYOOiEMECEa+9aaeKeTaXaJ+mqK5L+2aD+tyRhDM-DX+lCEYzowY1ILmruiesIYiUiGBiTIBtsTNDNZs5Bmeze+KNSzBp6-emqZLPBxe62nBtyP1EhqKDevWqBxkLyYE97bB8uwemwNJda6ygOwh+hyh8yEGw60etBihm+qm-SbSQRuhyB-hpSXU0Gc0BBtTfuYSIok+9Bmqdi1i6lZgaRhyHezRuWth0RwiL9d0t0q6T23RmqMTUTETCidRyDDCGxhRvhwiHsqNbsqx0CIeQeeRtR8hl2tydu3xqCFxnyAUoJgJp8RbF8LxyOtsF+3aN+7aPe9hm+lrc8M8S8Ox7xlCRxzJu2HR0+tyUO9kyLYx3JlCDfHvAJ47Cp4oIpxRvJqUpTaU3h9JtsZU+sasVpgJouVOg8kEDpjxvp5YDp96N6NID6QzDpjuaq-eDpmYuxaKrakarymqB0G0ZZk1eZvq0apZ0hbEnZiGXqxyhqlCOG2Gt+IcfIiyqSGSzoXOm5hCrC-qHCqYFQFcJYZ51YMMLATCtgpCsyWOh+mO8ENKV8757CjkK4DbCF+0zcjsxc0GuFgZ4sx09vcQMFprZJ5rMoT0g5xJVFsZHO7O5OLFzyq035zEMl9EDS7FmiMFzyYK6h+0gUcfI0mlu+gF++hlm2hU0l5h2y1JDllmkbJKoV14Rk0UlkwV3czpvcguUVzYnk0qMFkkpVg4LkuVsU0qPkkCWoS+2HFcaHc0sV3g1k3597Wl8YfI-E0w2AmS3TGcsDa4nMg5xVwx-Rq6BEFE4nTw2F66N1100Y2wPwr1sFymoRlc-s7-GEgkr4YN6mkN9c64wvK1hrY8YUe6+66EsEnuezeknNlwc0jyG852bN4IEqwHYIH44osHLAbfOa2tlaa40g04zDGt1l1toobovgzNsF4msJsC1grt35hPNYxPfIpwOQytlcbt63Y3KQI48dxt6DbtpsxspBxQboxo9V9jbt-AHKndwgUdhY2XR5rgZ8h8s9lGDYw9rdY9jk299tjY1feV2F15kMd5t59Yg-Ho5k3g59kBoYyvfIlcY434jTMF-98DnADIpN8w7NnluDiySI37JdVAMDphtDzF7-KInOcxuBix2qSIwNjvbD2B8TPDvZ3Q2e+YMDqVmjsCvQwkgw6jlO6Vg8uj9Pa149v2rjooH47OlyYDmIMDnhbj9e3Qzd-8sF-F8ZAl1gJg8Tt8yT5OGTm54gkD77bNqTzTwlnAk49TxTvFpT8Zc-V4yowVrTgz2TnAkz44szwz8zn49gG27D+z5T8-ftiA35lzoznA9z--TzuzgLyz0A0RpYfT257z4Lyjm1rznOrfML5T1z7-eL6TiLmwK+Q0uVjTwLlT-PRI+fZL+zmvaMqloT324TnjmvMfTWQVkTs2ir0fGXJlpwJjyV5j84Srxr6rsD6J2eGJjrtXDLmrsxkj8xlLGYTr8dIbsj3Dsbqryb1Dta9DuNTcbHD3LUBbjapbmvZUTwx3GtiDtoyD-PHboj9b35g7sByXZF+vC7MDj5t919j9tLk7tbroO799+7p7hQa79UM7lNu9gpsbl7m7v7rVx88H89x8q74H37t7wdyHhHi9-aH7vb7drAXd9H-d7b1bkHuH-7vd7KrH47nH2Hk9MH5dlsldmvJ7Sk1IQV5BldlBtd-PGn9PeninhnrNanyN0w9n1d-nyPdsmPIPJd-npn3E2gfwhvTVjYVADn+XiX93XHp3QdhX8X1nJtn7L0UX8X9Xs3TXvvHXxnqns3VXJD9guXsXk33XM3-mI3ynrns3FfUUvgAAXVd6AA\",\r\n    \"Kabir Shahani\",\r\n    addDays(new Date(), -2).getTime(),\r\n    \"I love the differnent fonts, but make the nike and zoom closer together in size\"\r\n  )\r\n];\r\n","import React, { useState } from \"react\";\r\nimport ReactDOM from \"react-dom\";\r\nimport { ModelRenderer } from \"./ModelRenderer\";\r\nimport \"bootstrap/dist/css/bootstrap.min.css\";\r\nimport \"./index.css\";\r\nimport Header from \"./Header/Header\";\r\nimport { NotesColumn } from \"./NotesColumn/NotesColumn\";\r\nimport { DrawOver } from \"./DrawOver/DrawOver\";\r\nimport NOTES, { NoteModel, NoteCamera, NotePin } from \"./notes.js\";\r\nimport LZString from \"lz-string\";\r\n\r\nconst COLORS = [\"#c4c4c4\", \"#ff7a7a\", \"#ffe279\", \"#ffc37c\"];\r\nexport const CURSOR = {\r\n  DEFAULT: \"pointer\",\r\n  DRAWOVER: \"drawover\"\r\n};\r\n\r\nfunction addComment(notes, camera, controls, comment, drawing) {\r\n  return [\r\n    new NoteModel(\r\n      1 +\r\n        Math.max(\r\n          ...notes.flatMap(({ id, thread }) => [\r\n            id,\r\n            ...thread.map(({ id }) => id)\r\n          ])\r\n        ),\r\n      new NoteCamera(camera.position.toArray(), controls.target.toArray()),\r\n      new NotePin(COLORS[Math.floor(Math.random() * COLORS.length)]),\r\n      LZString.compressToEncodedURIComponent(JSON.stringify(drawing)),\r\n      \"Greg Gottesman\",\r\n      new Date().getTime(),\r\n      comment\r\n    ),\r\n    ...notes\r\n  ];\r\n}\r\nfunction addReply(notes, id, comment) {\r\n  return notes.map(({ thread, ...note }) =>\r\n    note.id === id\r\n      ? {\r\n          ...note,\r\n          thread: [\r\n            new NoteModel(\r\n              1 +\r\n                Math.max(\r\n                  ...notes.flatMap(({ id, thread }) => [\r\n                    id,\r\n                    ...thread.map(({ id }) => id)\r\n                  ])\r\n                ),\r\n              null,\r\n              new NotePin(note.pin.color),\r\n              null,\r\n              \"Greg Gottesman\",\r\n              new Date().getTime(),\r\n              comment\r\n            ),\r\n            ...thread\r\n          ]\r\n        }\r\n      : { thread, ...note }\r\n  );\r\n}\r\nfunction deleteNote(id, notes) {\r\n  return notes\r\n    .filter(note => note.id !== id)\r\n    .map(({ thread, ...note }) => ({\r\n      thread: thread.filter(note => note.id !== id),\r\n      ...note\r\n    }));\r\n}\r\n\r\nfunction cameraPositionIs(camera, controls, position, focus) {\r\n  return (\r\n    camera.position\r\n      .toArray()\r\n      .every((p, i) => Math.abs(p - position[i]) < 1e-10) &&\r\n    controls.target.toArray().every((t, i) => Math.abs(t - focus[i]) < 1e-10)\r\n  );\r\n}\r\nfunction handleOrbitChange(\r\n  camera,\r\n  controls,\r\n  selectedNote,\r\n  setSelectedNote,\r\n  setDrawing\r\n) {\r\n  if (\r\n    selectedNote &&\r\n    !cameraPositionIs(\r\n      camera,\r\n      controls,\r\n      selectedNote.camera.position,\r\n      selectedNote.camera.focus\r\n    )\r\n  ) {\r\n    setSelectedNote(null);\r\n    setDrawing(null);\r\n  }\r\n}\r\n\r\nfunction MainPage() {\r\n  const [camera, setCamera] = useState();\r\n  const [controls, setControls] = useState();\r\n  const [notes, setNotes] = useState(NOTES);\r\n  const [selectedNote, setSelectedNote] = useState();\r\n  const [cursor, setCursor] = useState(CURSOR.DRAWOVER);\r\n  const [drawing, setDrawing] = useState();\r\n\r\n  return (\r\n    <>\r\n      <Header />\r\n      <div id=\"main-area\">\r\n        <div id=\"variations-column\"></div>\r\n        <DrawOver\r\n          drawing={drawing}\r\n          onChange={\r\n            cursor === CURSOR.DRAWOVER\r\n              ? newDrawing => setDrawing(newDrawing)\r\n              : null\r\n          }\r\n          className=\"draw-over\"\r\n        >\r\n          <ModelRenderer\r\n            className=\"renderer\"\r\n            cameraPosition={selectedNote && selectedNote.camera}\r\n            onOrbitChange={() =>\r\n              handleOrbitChange(\r\n                camera,\r\n                controls,\r\n                selectedNote,\r\n                setSelectedNote,\r\n                setDrawing\r\n              )\r\n            }\r\n            setCamera={camera => setCamera(camera)}\r\n            setOrbitControls={controls => setControls(controls)}\r\n          />\r\n        </DrawOver>\r\n        <NotesColumn\r\n          notes={notes}\r\n          selected={selectedNote && selectedNote.id}\r\n          cursor={cursor}\r\n          onSelect={selected => {\r\n            setSelectedNote(selected);\r\n            setDrawing(\r\n              selected.drawOver &&\r\n                JSON.parse(\r\n                  LZString.decompressFromEncodedURIComponent(selected.drawOver)\r\n                )\r\n            );\r\n          }}\r\n          onDeselect={() => {\r\n            setSelectedNote(null);\r\n            setDrawing(null);\r\n          }}\r\n          onSubmitComment={comment => {\r\n            setNotes(addComment(notes, camera, controls, comment, drawing));\r\n            setDrawing(null);\r\n            setCursor(CURSOR.DEFAULT);\r\n          }}\r\n          onCancel={() => {\r\n            setDrawing(null);\r\n            setCursor(CURSOR.DEFAULT);\r\n          }}\r\n          onSubmitReply={({ id }, comment) =>\r\n            setNotes(addReply(notes, id, comment))\r\n          }\r\n          onResolveNote={id => {\r\n            setNotes(deleteNote(id, notes));\r\n            if (selectedNote && id === selectedNote.id) {\r\n              setSelectedNote(null);\r\n              setDrawing(null);\r\n            }\r\n          }}\r\n          allowRedraw={drawing && drawing.length > 0}\r\n          onRedraw={() => setDrawing(null)}\r\n        />\r\n      </div>\r\n    </>\r\n  );\r\n}\r\n\r\nReactDOM.render(<MainPage />, document.getElementById(\"root\"));\r\n"],"sourceRoot":""}